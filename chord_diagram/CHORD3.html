<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chord Plot</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<style>

</style>

<body>

    <h1>Chord Diagram</h1>
    <div id="chordDiagram"></div>
<script src="Functions/plot_diagram.js"></script>
    <script>
        const categories = [
            "Patients data", "Cell lines data", "Drug combinations",
            "Drug-target interactions", "Drug-disease links", "Gene-disease links", "Cancer mutations",
            "Chemical structures", "Protein structures", "Toxicities", "Pathways", "Docking",
            "Homology modelling", "Binding sites", "Combination web-tools", "Target based DR", "Phenotypic DR", "Toxicity assessment", "Design new clinical trials",
            "Mapping of diseases pathways", "Disease-specific", "Disease-agnostic", "Biomarker identification",
            "Predict adverse reactions"
        ];

        // Define the data

        d3.csv("chord_plot_updated.csv")
            .then(function (data) {
                var rowHeaders = [];
                var colHeaders = [];
                var matrixData = [];

                data.forEach(function (entry) {
                
                    var keys = Object.keys(entry);
                    var values = entry[keys[0]].split(';');

                    var rowHeader = keys[0].trim();
                    rowHeaders.push(rowHeader);

                    values.forEach(function (value, index) 
                    {
                        if (index > 0) {
                            var colHeader = value.trim().split(';')[0];
                            if (!colHeaders.includes(colHeader)) {
                                colHeaders.push(colHeader);
                            }
                        }
                    });

                    matrixData.push(values.slice(1).map(Number));
                });

                // Creating n x n matrix
                var n = rowHeaders.length;
                var matrix = new Array(n).fill(0).map(() => new Array(n).fill(0));

                matrixData.forEach(function (row, rowIndex) {
                    row.forEach(function (value, colIndex) {
                        matrix[rowIndex][colIndex] = value;
                    });
                });

                console.log(matrix);

                // Define dimensions for the plot
                Chord_initials(matrix);



            })
            .catch(error => {
                console.error('Error fetching or parsing CSV data:', error);
            });
        // Split the data into rows





    </script>
</body>

</html>